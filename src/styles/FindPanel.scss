.FindPanel {
    display: grid;
    height: 100%;
    grid-template:
        "index"
        "search"
        "results" 1fr;
    @media (max-width: 29rem) {
        grid-template:
            "index"
            "results" 1fr
            "search";
        // flex-direction: column-reverse;
    }
    padding-inline: 0.325rem;
    padding-block: 0 0.325rem;

    gap: 0.325rem;
}

.FindPanel-toolbar {
    grid-area: index;
    display: flex;
    gap: 0.325rem;
    // justify-content: space-between;
    align-items: stretch;
    background: var(--toolbar-background);
    // border: 1px solid red;
    font-size: var(--sidebar-font-size);
    // padding: 0.25rem;
    // height: var(--toolbar-height);
    @media (max-width: 29rem) {
        // border-bottom: var(--control-border);
    }

    & select {
        flex: 1;
        font-weight: bold;
    }
}

.FindPanel-search {
    grid-area: search;
    font-size: var(--sidebar-font-size);
    background: var(--dialog-background);
    // padding: 0.25rem;
    gap: 0.325rem;
    @media (max-width: 29rem) {
        // border-top: var(--control-border);
    }
    @media (min-width: 29rem) {
        // border-bottom: var(--control-border);
    }
    display: flex;

    & input {
        flex: 1;
        width: 0;
    }
}

.FindPanel-results {
    grid-area: results;
    flex: 1;
    overflow: auto;
    display: flex;
    flex-direction: column;
    background: var(--listbox-background);
    border: var(--control-border);
    &:focus {
        outline: none;
    }

    &::after {
        flex: 1;
        content: "~";
        text-align: center;
        display: flex;
        justify-content: center;
        padding: 0.25rem;
        border-top: var(--control-border);
    }
}

.IndexAccordion {
    display: flex;
    flex-direction: column;

    & > .status {
        padding-inline: 0.25rem;
        padding-block: 0.5rem;
        text-align: center;
        border-bottom: var(--control-border);
        // background: var(--background);
    }

    & > .row {
        display: flex;
        align-items: center;
        gap: 0.5rem;

        & > .expand {
            flex: 1;
        }
    }

    & > .sections {
        flex: 1;
        display: flex;
        flex-direction: column;

        & > details:not(:last-child) {
            border-bottom: var(--control-border);
            border-bottom: 1px solid gray;
        }

        & > details > summary:focus {
            outline: none;
        }
        & > details > summary:focus-visible {
            outline: var(--focus-outline);
            outline-offset: -0.25rem;
        }
        & > details > summary {
            display: block;
            user-select: none;
            background: var(--background);

            display: flex;
            align-items: center;
            position: relative;
        }
        & > details > summary > .label {
            flex: 1;
            padding-block: 0.325rem;
            padding-inline: 0 0.5rem;
            // font-size: 1.05em;
            font-weight: inherit;

            display: flex;
            align-items: center;
        }

        & > details > summary > .meta {
            // flex: 1;
            padding-inline-end: 0.5rem;

            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 0.5rem;
        }
        & > details > summary > .meta > .status-current {
            width: 0.85rem;
            height: 0.85rem;
            border-radius: 100%;
            position: relative;
            border: 4px solid orange;
            overflow: hidden;
            color: transparent;
        }
        & > details > summary > .openIndicator {
            flex-shrink: 0;
            transition: transform ease-in-out 50ms;
            border-radius: 100%;
        }
        & > details[open] > summary > .openIndicator {
            transform: rotate(90deg);
        }
    }
}

.AllList {
    display: flex;
    flex-direction: column;

    & > .status {
        // background: var(--background);
        padding-inline: 0.25rem;
        padding-block: 0.5rem;
        text-align: center;
        border-bottom: var(--control-border);
    }

    & > .row {
        display: flex;
        align-items: center;
        gap: 0.5rem;

        & > .expand {
            flex: 1;
        }
    }

    & > .content {
        flex: 1;
    }
}

ul.ReferenceList {
    list-style: none;
    margin: 0;
    padding: 0;
    background: var(--listbox-background);

    line-height: 1.2;
    display: grid;
    grid-template-columns: minmax(2.6rem, auto) 1fr;

    // Reference
    & > li {
        grid-column: 1 / -1;
        &:not(:last-child) {
            border-bottom: 1px solid var(--control-border-color);
        }

        display: flex;
        text-decoration: none;
        color: inherit;

        display: grid;
        grid-template-areas:
            "id title"
            "id lines";
        grid-template-columns: minmax(2.65rem, auto) 1fr; // fallback
        grid-template-columns: subgrid;
    }

    & > li > .reference-id {
        grid-area: id;
        text-decoration: none;
        font-weight: bold;
        text-align: end;
        padding: 0.2rem;
        border-inline-end: 1px solid var(--control-border-color);
    }
    & > li > .reference-title {
        flex: 1;
        padding: 0.2rem;
        color: var(--link-color);
        text-decoration: none;
        font: inherit;
        &:hover {
            text-decoration: underline;
        }
    }

    & > li.is-current > .reference-id {
        background: orange;
    }

    & > li.is-deleted > .reference-title {
        text-decoration: line-through;
        &:hover {
            text-decoration: line-through underline;
        }
    }

    // List of matching lines
    & > li > ul {
        grid-area: lines;
        margin: 0;
        padding: 0;
        list-style: none;
        // border-left: 1px solid var(--control-border-color);

        & > li {
            font-size: 0.8em;
            padding-inline: 0.35rem;
            padding-block: 0.1rem;
            border-top: 1px dashed var(--control-border-color);
        }
    }
}
